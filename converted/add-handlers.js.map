{"version":3,"sources":["../javascripts/add-handlers.js"],"names":[],"mappings":"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","file":"../javascripts/add-handlers.js","sourcesContent":["import * as mf from \"multiuse-functions\";\nimport * as template from \"hb-template\";\nimport * as addSongs from \"add-songs\";\nimport * as $ from \"jquery\";\nimport * as _ from \"lodash\";\nexport default function(uniqueArtists, uniqueAlbums, retrievedSongsArr, firebaseRef) {\n  // Initially hidden so all its reveals look the same\n  $(\"#add-reset\").slideUp();\n  // Artist dropdown menu\n  $(\"#add_artist-dropdown\").on(\"click\", \".artist-dr-item\", function(e) {\n    if($(\"#add-reset\").hasClass(\"full-transparent\")) {\n      mf.elementReveal($(\"#add-reset\"));\n    }\n    let selectedArtist = this.name;\n    $(\"#artist\").val(selectedArtist); // On choosing artist, set the album dropdown to their albums\n    let artistAlbums = _.chain(retrievedSongsArr).filter({'artist': selectedArtist}).uniq(\"album\").pluck(\"album\").value();\n    $(\"#add_album-dropdown\").html(template.addDropdown({album:artistAlbums}));\n  });\n  // Album dropdown menu\n  $(\"#add_album-dropdown\").on(\"click\", \".album-dr-item\", function(e) {\n    if($(\"#add-reset\").hasClass(\"full-transparent\")) {\n      mf.elementReveal($(\"#add-reset\"));\n    }\n    let selectedAlbum = this.name;\n    $(\"#album\").val(selectedAlbum); // On choosing album, set the artist dropdown to only the album artist\n    let albumArtist = _.chain(retrievedSongsArr).filter({'album': selectedAlbum}).uniq(\"artist\").pluck(\"artist\").value();\n    $(\"#add_artist-dropdown\").html(template.addDropdown({artist:albumArtist}));\n  });\n  // Submit button\n  $(\"#add-submit\").click(function(e) {\n    e.preventDefault();\n    addSongs(firebaseRef);\n    mf.elementHide($(\"#add-reset\"));\n  });\n  // Reveal the reset button on any change to the form\n  $(\"#add-form\").on(\"change\", \".add-input\", function(e) {\n    if($(\"#add-reset\").hasClass(\"full-transparent\")) {\n      mf.elementReveal($(\"#add-reset\"));\n    }\n  });\n  // Form reset button\n  $(\"#add-reset\").click(function(e) {\n    e.preventDefault();\n    mf.elementHide($(\"#add-reset\"));\n    $('#add-form').each(function() {\n      this.reset();\n    });\n    $(\"#add_artist-dropdown\").html(template.addDropdown({artist:uniqueArtists}));\n    $(\"#add_album-dropdown\").html(template.addDropdown({album:uniqueAlbums}));\n  });\n}"]}