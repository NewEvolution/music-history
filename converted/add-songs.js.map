{"version":3,"sources":["../javascripts/add-songs.js"],"names":[],"mappings":";;;AAGA,MAAI,UAAU,GAAG,SAAb,UAAU,CAAY,YAAY,EAAE;AACtC,QAAI,KAAK,GAAG,EAAE,CAAC;AACf,QAAG,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;AAChC,WAAK,GAAG,MAAM,CAAC;KAChB,MAAM;AACL,WAAK,GAAG,KAAK,CAAC;KACf;AACD,iBAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACxB,iBAAE,gBAAgB,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACvC,iBAAE,gBAAgB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;GACnC,CAAC;;mBACa,UAAS,WAAW,EAAE;AACnC,QAAI,OAAO,GAAG,IAAI,CAAC;AACnB,QAAI,SAAS,GAAG,EAAE,CAAC;AACnB,YAAQ,GAAG,mBAAU,CAAC;AACtB,SAAI,IAAI,GAAG,IAAI,QAAQ,EAAE;;AAEvB,UAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE;AAChF,kBAAU,CAAC,GAAG,CAAC,CAAC;AAChB,eAAO,GAAG,KAAK,CAAC;AAChB,cAAM;;OAEP,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;AACvC,mBAAS,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACnC,MAAM;;AACL,mBAAS,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;SAChC;KACF;AACD,aAAS,CAAC,GAAG,GAAG,KAAI,MAAM,EAAE,CAAC;AAC7B,QAAG,OAAO,EAAE;;AACV,aAAO,GAAG,KAAK,CAAC;AAChB,iBAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,YAAW;AACpD,qBAAE,WAAW,CAAC,CAAC,IAAI,CAAC,YAAW;AAC7B,cAAI,CAAC,KAAK,EAAE,CAAC;SACd,CAAC,CAAC;OACJ,CAAC,CAAC;KACJ;GACF","file":"../javascripts/add-songs.js","sourcesContent":["import * as formData from \"get-form-data\";\nimport * as $ from \"jquery\";\nimport * as uid from \"uid\";\nlet alertModal = function(missingField) {\n  let aOrAn = \"\";\n  if(missingField.charAt(0) == \"a\") {\n    aOrAn = \" an \";\n  } else {\n    aOrAn = \" a \";\n  }\n  $(\"#aOrAn\").html(aOrAn);\n  $(\"#invalid-field\").html(missingField);\n  $('#invalid-modal').modal('show');\n};\nexport default function(firebaseRef) {\n  let isValid = true;\n  let outputObj = {};\n  inputObj = formData();\n  for(let key in inputObj) {\n    // Verify all form fields are completed, pop up modal error if not\n    if(inputObj[key] === \"\" || inputObj[key].length === 0 || inputObj[key][0] === \"\") {\n      alertModal(key);\n      isValid = false;\n      break;\n    // Genre radio array, only one possible value, need the value not the array\n    } else if (Array.isArray(inputObj[key])) {\n      outputObj[key] = inputObj[key][0];\n    } else { // All other song properties\n      outputObj[key] = inputObj[key];\n    }\n  }\n  outputObj.uid = uid.getUid();\n  if(isValid) { // Clear out the form on sucessfull submission\n    isValid = false;\n    firebaseRef.child(\"songs\").push(outputObj, function() {\n      $('#add-form').each(function() {\n        this.reset();\n      });\n    });\n  }\n}"]}