{"version":3,"sources":["../javascripts/populate-songs.js"],"names":[],"mappings":"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","file":"../javascripts/populate-songs.js","sourcesContent":["import * as template from \"hb-template\";\nimport * as mf from \"multiuse-functions\";\nimport * as $ from \"jquery\";\nimport * as _ from \"lodash\";\nexport default function(sentSongsObj, currentPage, thePromise) { // Populates the song list and form elements on initial page load\n  let promisedObj = {};\n  let retrievedSongsArr = [];\n  for(let key in sentSongsObj) {\n    retrievedSongsArr[retrievedSongsArr.length] = sentSongsObj[key]; // Turn JSON object into array\n  }\n\n  let uniqueArtists = _.chain(retrievedSongsArr).uniq(\"artist\").pluck(\"artist\").value();\n  $(\"#artist\").html(template.addSelect({item:uniqueArtists}));\n  $(\"#add_artist-dropdown\").html(template.addDropdown({artist:uniqueArtists}));\n\n  let uniqueAlbums = _.chain(retrievedSongsArr).uniq(\"album\").pluck(\"album\").value();\n  $(\"#album\").html(template.addSelect({item:uniqueAlbums}));\n  $(\"#add_album-dropdown\").html(template.addDropdown({album:uniqueAlbums}));\n\n  // Start genre setter block ===============================================================\n  let uniqueGenres = _.chain(retrievedSongsArr).uniq(\"genre\").pluck(\"genre\").value();\n  $(\"#genre\").html(\"\"); // Wipe the genre check/radio section on change so that it doesn't pile new on old\n  let addonOtherField = false;\n  if(uniqueGenres.length === 0) {\n    addonOtherField = true;\n  }\n  while(uniqueGenres.length) {\n    let genrePairArr = uniqueGenres.splice(0,2);\n    if(currentPage === \"index.html\" || currentPage === \"\") { // Checkboxes if it's on index.html\n      $(\"#genre\").append(template.genreCheck({genre:genrePairArr}));\n    } else if (currentPage === \"add.html\") { // Radio buttons if it's on add.html\n      if(genrePairArr.length === 2) { // 2 by 2 for pairs of genres\n        $(\"#genre\").append(template.genreRadio({genre:genrePairArr}));\n        addonOtherField = true;\n      } else { // One-up for single dangling genres + other field\n        $(\"#genre\").append(template.genreRadioSingle({genre:genrePairArr}));\n        addonOtherField = false;\n      }\n    }\n  }\n  if(addonOtherField && currentPage === \"add.html\") { // Add the full-width other field if extant genres are even\n    $(\"#genre\").append(template.genreRadioOther);\n  }\n  // End genre setter block =================================================================\n  $(\".content\").html(template.songs(sentSongsObj));\n  $(\"section\").each(function() { // Fade in all the song displays\n    mf.elementReveal(this);\n  });\n  promisedObj.u_artists = uniqueArtists;\n  promisedObj.u_albums = uniqueAlbums;\n  promisedObj.songs_a = retrievedSongsArr;\n  thePromise.resolve(promisedObj);\n}"]}